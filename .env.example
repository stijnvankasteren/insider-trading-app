# Copy to `.env` and adjust values.
# For Portainer: you can also set these as Stack "Environment variables" once and they persist across redeploys.

# App
APP_NAME=AltData
PUBLIC_BASE_URL=http://localhost:8000

# Ingest (required for POST /api/ingest/trades)
INGEST_SECRET=change-me
# Optional key rotation: accept multiple secrets during a rollout.
# - Keep `INGEST_SECRET` as the new primary.
# - Put the old secret in `INGEST_SECRET_PREVIOUS` (or comma-separated `INGEST_SECRETS`).
# INGEST_SECRET_PREVIOUS=old-secret
# INGEST_SECRETS=primary,secondary

# Ingest input validation / safety
# - Set to true to reject unknown fields instead of storing them in `raw`.
INGEST_REJECT_EXTRA_FIELDS=false
# - Guardrails against accidental/abusive huge payloads.
INGEST_MAX_ITEMS=5000
INGEST_MAX_RAW_BYTES=50000

# Auth (recommended in production: AUTH_DISABLED=false + strong secrets)
AUTH_DISABLED=true
APP_PASSWORD=change-me
SESSION_SECRET=change-me-to-a-long-random-string
COOKIE_SECURE=false

# Proxy & rate limiting
# Only enable TRUST_PROXY_HEADERS when running behind a trusted reverse proxy
# that sets X-Forwarded-For / X-Real-IP.
TRUST_PROXY_HEADERS=false

RATE_LIMIT_ENABLED=true
RATE_LIMIT_WINDOW_SECONDS=60
RATE_LIMIT_DEFAULT_IP=120
RATE_LIMIT_DEFAULT_PRINCIPAL=240
RATE_LIMIT_AUTH_IP=20
RATE_LIMIT_AUTH_PRINCIPAL=40
RATE_LIMIT_INGEST_IP=60
RATE_LIMIT_INGEST_PRINCIPAL=120
RATE_LIMIT_HEALTH_IP=300
RATE_LIMIT_HEALTH_PRINCIPAL=600

# Local dev database (default is sqlite)
DATABASE_URL=sqlite:///./data/dev.db

# Docker/Postgres (used by docker-compose.yml via ${...} substitutions)
DB_IMAGE=postgres:16
POSTGRES_USER=postgres
POSTGRES_PASSWORD=change-me
POSTGRES_DB=alldata
POSTGRES_HOST=db
POSTGRES_PORT=5432

# Optional port mappings / build settings
# DB_PORT_MAPPING=5432:5432
# WEB_PORT_MAPPING=8000:8000
# WEB_BUILD_CONTEXT=.
